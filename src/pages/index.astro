---
import ContactWindow from '../components/ContactWindows.jsx';
export const prerender = true;
import MainLayout from '../layouts/MainLayout.astro';
import '../styles/cards.css'; // <-- Imports the cards/grids
import pkg from 'lucide-react';
const { TrendingUp } = pkg; // Only need TrendingUp here for the Sales card
import { getCollection } from 'astro:content';
const allPosts = await getCollection('blog');

// Sort by date (newest first) and take top 3
const recentPosts = allPosts.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()).slice(0, 3);
---

<MainLayout title="Home">
  
<div class="hero-wrapper">
    
    <div class="hero-text">
      <h1>Data Intelligence, <br/> <span class="highlight">Engineered.</span></h1>
      <p class="lead">
        I don't just run queries. I build interactive data applications that turn complex datasets into actionable business insights.
      </p>
      
      <div class="hero-actions">
        <a href="/dashboards/twins" class="btn btn-primary">View Latest Dashboard</a>
        <a href="https://github.com/patbritton" target="_blank" class="btn btn-secondary" rel="noopener noreferrer">
          Review Code
        </a>
      </div>
    </div>

   <div class="hero-stats">
  <ContactWindow client:load />
</div>

  </div>

  <h2>Live Dashboards</h2>
  
  <div class="project-grid">
    
    <a href="/dashboards/twins" class="project-card">
      <div class="icon-box" style="background: #002B5C; color: white; padding: 0;">
        <!-- Using the custom image path defined in dashboards.js, rendered directly -->
        <img src="/images/twins-logo.png" alt="Twins Dashboard Logo" style="width: 100%; height: 100%; object-fit: contain; padding: 12px;"/>
      </div>
      <div class="content">
        <h3>Twins Analytics Suite</h3>
        <p>120+ years of historical data visualization including payroll trends, win-loss records, and attendance analysis.</p>
        <span class="tag">React</span> <span class="tag">Recharts</span>
      </div>
    </a>

    <a href="/dashboards/twins-predictive" class="project-card">
      <div class="icon-box" style="background: #002B5C; color: white; padding: 0;">
        <!-- Using the custom image path defined in dashboards.js, rendered directly -->
        <img src="/images/twins-logo.png" alt="Twins Dashboard Logo" style="width: 100%; height: 100%; object-fit: contain; padding: 12px;"/>
      </div>
      <div class="content">
        <h3>Twins Analytics Suite</h3>
        <p>120+ years of historical data visualization including payroll trends, win-loss records, and attendance analysis.</p>
        <span class="tag">React</span> <span class="tag">Recharts</span>
      </div>
    </a>

  </div>
<h2 style="margin-top: 4rem;">Latest Updates</h2>
<div class="blog-grid">
  {recentPosts.map(post => (
    <a href={`/blog/${post.slug}`} class="blog-card">
      <span class="post-date">{post.data.pubDate.toISOString().slice(0,10)}</span>
      <h3>{post.data.title}</h3>
      <p>{post.data.description}</p>
    </a>
  ))}
</div>
</MainLayout>