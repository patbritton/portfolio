---
import ContactWindow from '../components/ContactWindows.jsx';
import MainLayout from '../layouts/MainLayout.astro';
import '../styles/cards.css'; // <-- Imports the cards/grids
import { Trophy, TrendingUp } from 'lucide-react'; // Using icons for flair
import { getCollection } from 'astro:content';
const allPosts = await getCollection('blog');
// Sort by date (newest first) and take top 3
const recentPosts = allPosts.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()).slice(0, 3);
---

<MainLayout title="Home">
  
<div class="hero-wrapper">
    
    <div class="hero-text">
      <h1>Data Intelligence, <br/> <span class="highlight">Engineered.</span></h1>
      <p class="lead">
        I don't just run queries. I build interactive data applications that turn complex datasets into actionable business insights.
      </p>
      
      <div class="hero-actions">
        <a href="/projects/twins" class="btn btn-primary">View Latest Dashboard</a>
        <a href="https://github.com/patbritton" target="_blank" class="btn btn-secondary">
          Review Code
        </a>
      </div>
    </div>

   <div class="hero-stats">
  <ContactWindow client:load />
</div>

  </div>

  <h2>Live Dashboards</h2>
  
  <div class="project-grid">
    
    <a href="/projects/twins" class="project-card">
      <div class="icon-box" style="background: #002B5C; color: white;">
        <Trophy size={32} />
      </div>
      <div class="content">
        <h3>Twins Analytics Suite</h3>
        <p>120+ years of historical data visualization including payroll trends, win/loss records, and attendance analysis.</p>
        <span class="tag">React</span> <span class="tag">Recharts</span>
      </div>
    </a>

    <div class="project-card coming-soon">
      <div class="icon-box" style="background: #ddd; color: #666;">
        <TrendingUp size={32} />
      </div>
      <div class="content">
        <h3>Sales Forecasting</h3>
        <p>Coming soon: A predictive model using Python and Prophet.</p>
        <span class="tag">Python</span>
      </div>
    </div>

  </div>
<h2 style="margin-top: 4rem;">Latest Updates</h2>
<div class="blog-grid">
  {recentPosts.map(post => (
    <a href={`/blog/${post.slug}`} class="blog-card">
      <span class="post-date">{post.data.pubDate.toISOString().slice(0,10)}</span>
      <h3>{post.data.title}</h3>
      <p>{post.data.description}</p>
    </a>
  ))}
</div>
</MainLayout>