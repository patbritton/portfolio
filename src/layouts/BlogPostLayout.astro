---
import MainLayout from './MainLayout.astro';
import '../styles/cards.css';
const { frontmatter } = Astro.props;

// Formatting the date
const dateStr = new Date(frontmatter.pubDate).toLocaleDateString('en-US', {
  year: 'numeric', month: 'long', day: 'numeric'
});
---

<MainLayout title={frontmatter.title}>
  <div class="blog-container">
    
    <header>
      <span class="date">{dateStr}</span>
      <h1>{frontmatter.title}</h1>
      <p class="desc">{frontmatter.description}</p>
      <div class="tags">
        {frontmatter.tags.map(tag => <span class="tag">#{tag}</span>)}
      </div>
    </header>

    <hr />

    <article class="prose">
      <slot />
    </article>

    <hr />

    <div class="interaction-area">
      <h3>Share & Discuss</h3>
      
      <button id="shareBtn" class="action-btn">
        ðŸ“¤ Share this Post
      </button>

<script src="https://giscus.app/client.js"
        data-repo="patbritton/portfolio"
        data-repo-id="R_kgDOQdEBRA"
        data-category="[ENTER CATEGORY NAME HERE]"
        data-category-id="[ENTER CATEGORY ID HERE]"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="en"
        crossorigin="anonymous"
        async>
</script>
    </div>

  </div>
</MainLayout>

<script>
  // Simple Share Logic
  document.getElementById('shareBtn')?.addEventListener('click', async () => {
    if (navigator.share) {
      try {
        await navigator.share({
          title: document.title,
          url: window.location.href
        });
      } catch (err) {
        console.log('Share canceled');
      }
    } else {
      // Fallback for desktop
      navigator.clipboard.writeText(window.location.href);
      alert('Link copied to clipboard!');
    }
  });
</script>